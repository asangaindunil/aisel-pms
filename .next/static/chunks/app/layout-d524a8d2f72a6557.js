(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{3123:function(e,t,o){Promise.resolve().then(o.t.bind(o,9974,23)),Promise.resolve().then(o.t.bind(o,2778,23)),Promise.resolve().then(o.bind(o,4362))},4362:function(e,t,o){"use strict";o.d(t,{AuthProvider:function(){return i},a:function(){return l}});var a=o(7437),n=o(2265);let r=(0,n.createContext)(void 0);function i(e){let{children:t}=e,[o,i]=(0,n.useState)(null),[l,c]=(0,n.useState)(!0);(0,n.useEffect)(()=>{u()},[]);let u=async()=>{try{let e=localStorage.getItem("authToken");if(!e){c(!1);return}let t=await fetch("/api/auth/me",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();e.success&&e.data?i(e.data):localStorage.removeItem("authToken")}else localStorage.removeItem("authToken")}catch(e){console.error("Auth check failed:",e),localStorage.removeItem("authToken")}finally{c(!1)}},s={user:o,isLoading:l,login:async e=>{c(!0);try{let t=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),o=await t.json();if(!t.ok||!o.success)throw Error(o.error||"Login failed");o.data&&(localStorage.setItem("authToken",o.data.token),i(o.data.user))}catch(e){throw e}finally{c(!1)}},logout:()=>{localStorage.removeItem("authToken"),i(null)},isAuthenticated:!!o,isAdmin:(null==o?void 0:o.role)==="admin"};return(0,a.jsx)(r.Provider,{value:s,children:t})}function l(){let e=(0,n.useContext)(r);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},2778:function(){},9974:function(e){e.exports={style:{fontFamily:"'__Inter_e8ce0c', '__Inter_Fallback_e8ce0c'",fontStyle:"normal"},className:"__className_e8ce0c"}}},function(e){e.O(0,[635,971,117,744],function(){return e(e.s=3123)}),_N_E=e.O()}]);