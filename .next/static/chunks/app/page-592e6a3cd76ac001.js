(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5764:function(e,t,s){Promise.resolve().then(s.bind(s,9204))},9204:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return F}});var a=s(7437),r=s(2265),n=s(4362),i=s(9501),l=s(3590),d=s(7806),o=s(7769),c=s(2208),m=s(1115);let x=m.z.object({firstName:m.z.string().min(1,"First name is required").max(50,"First name too long"),lastName:m.z.string().min(1,"Last name is required").max(50,"Last name too long"),email:m.z.string().email("Invalid email address"),phoneNumber:m.z.string().min(10,"Phone number must be at least 10 digits").max(15,"Phone number too long"),dob:m.z.string().refine(e=>{let t=new Date(e);return!isNaN(t.getTime())&&t<new Date},"Invalid date of birth")}),u=m.z.object({username:m.z.string().min(1,"Username is required").trim(),password:m.z.string().min(1,"Password is required")});var h=s(5863);function g(e){let{variant:t="primary",size:s="md",isLoading:r=!1,disabled:n,className:i="",children:l,...d}=e,o="".concat("inline-flex items-center justify-center font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"," ").concat({primary:"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500 text-white shadow-sm hover:shadow-md",secondary:"bg-gray-100 hover:bg-gray-200 focus:ring-gray-500 text-gray-900 border border-gray-300",danger:"bg-red-600 hover:bg-red-700 focus:ring-red-500 text-white shadow-sm hover:shadow-md",ghost:"hover:bg-gray-100 focus:ring-gray-500 text-gray-700"}[t]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[s]," ").concat(i);return(0,a.jsxs)("button",{className:o,disabled:n||r,...d,children:[r&&(0,a.jsx)(h.Z,{className:"w-4 h-4 mr-2 animate-spin"}),l]})}let f=(0,r.forwardRef)((e,t)=>{let{label:s,error:r,helperText:n,className:i="",id:l,...d}=e,o=l||"input-".concat(Math.random().toString(36).substr(2,9));return(0,a.jsxs)("div",{className:"space-y-1",children:[s&&(0,a.jsx)("label",{htmlFor:o,className:"block text-sm font-medium text-gray-700",children:s}),(0,a.jsx)("input",{ref:t,id:o,className:"\n          block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm\n          placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 \n          focus:border-blue-500 transition-colors duration-200\n          ".concat(r?"border-red-300 focus:ring-red-500 focus:border-red-500":"","\n          ").concat(i,"\n        "),...d}),r&&(0,a.jsx)("p",{className:"text-sm text-red-600",role:"alert",children:r}),n&&!r&&(0,a.jsx)("p",{className:"text-sm text-gray-500",children:n})]})});function p(){var e,t;let[s,m]=(0,r.useState)(!1),[x,h]=(0,r.useState)(!1),[p,y]=(0,r.useState)(null),{login:j}=(0,n.a)(),{register:b,handleSubmit:N,formState:{errors:w,isValid:v},trigger:k,watch:C}=(0,i.cI)({resolver:(0,l.F)(u),mode:"onChange",defaultValues:{username:"",password:""}});C();let S=async e=>{try{if(h(!0),y(null),!await k())return;await j(e)}catch(e){y(e instanceof Error?e.message:"Login failed")}finally{h(!1)}};return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-50 flex items-center justify-center p-4",children:(0,a.jsx)("div",{className:"w-full max-w-md",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 p-8 text-white text-center",children:[(0,a.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-white/20 rounded-full mb-4",children:(0,a.jsx)(d.Z,{className:"w-8 h-8"})}),(0,a.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Welcome Back"}),(0,a.jsx)("p",{className:"text-blue-100",children:"Sign in to access your dashboard"})]}),(0,a.jsxs)("div",{className:"p-8",children:[(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),N(S)(e)},className:"space-y-6",noValidate:!0,children:[(0,a.jsx)("div",{children:(0,a.jsx)(f,{label:"Username",type:"text",placeholder:"Enter your username",...b("username",{required:"Username is required",minLength:{value:1,message:"Username is required"}}),error:null===(e=w.username)||void 0===e?void 0:e.message,autoComplete:"username"})}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(f,{label:"Password",type:s?"text":"password",placeholder:"Enter your password",...b("password",{required:"Password is required",minLength:{value:1,message:"Password is required"}}),error:null===(t=w.password)||void 0===t?void 0:t.message,autoComplete:"current-password"}),(0,a.jsx)("button",{type:"button",onClick:()=>m(!s),className:"absolute right-3 top-8 text-gray-400 hover:text-gray-600 transition-colors",tabIndex:-1,children:s?(0,a.jsx)(o.Z,{className:"w-5 h-5"}):(0,a.jsx)(c.Z,{className:"w-5 h-5"})})]}),p&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:(0,a.jsx)("p",{className:"text-sm text-red-600",children:p})}),(0,a.jsx)(g,{type:"submit",className:"w-full",size:"lg",isLoading:x,disabled:x,children:x?"Signing In...":"Sign In"})]}),(0,a.jsx)("div",{className:"mt-8 pt-6 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Demo Credentials:"}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"font-medium text-gray-700",children:"Admin:"}),(0,a.jsx)("span",{className:"text-gray-600",children:"admin / admin123"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"font-medium text-gray-700",children:"User:"}),(0,a.jsx)("span",{className:"text-gray-600",children:"user / user123"})]})]})]})})]})]})})})}f.displayName="Input";var y=s(5805),j=s(8906),b=s(2369),N=s(7692);function w(){let{user:e,logout:t,isAdmin:s}=(0,n.a)();return(0,a.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg flex items-center justify-center",children:(0,a.jsx)(y.Z,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Aisel Health"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Patient Management"})]})]})}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center",children:s?(0,a.jsx)(j.Z,{className:"w-4 h-4 text-blue-600"}):(0,a.jsx)(b.Z,{className:"w-4 h-4 text-gray-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:null==e?void 0:e.username}),(0,a.jsx)("p",{className:"text-xs text-gray-500 capitalize",children:null==e?void 0:e.role})]})]}),(0,a.jsxs)(g,{variant:"ghost",size:"sm",onClick:t,className:"text-gray-600 hover:text-gray-900",children:[(0,a.jsx)(N.Z,{className:"w-4 h-4 mr-2"}),"Logout"]})]})]})})})}var v=s(3281),k=s(9397),C=s(3247),S=s(8893),E=s(8930);function P(e){let{size:t="md",className:s=""}=e;return(0,a.jsx)("div",{className:"flex items-center justify-center ".concat(s),children:(0,a.jsx)(h.Z,{className:"animate-spin text-blue-600 ".concat({sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"}[t])})})}function z(e){let{patients:t,isLoading:s,onEdit:i,onDelete:l,onAdd:o}=e,[c,m]=(0,r.useState)(""),{isAdmin:x}=(0,n.a)(),u=(0,r.useMemo)(()=>{if(!c)return t;let e=c.toLowerCase();return t.filter(t=>t.firstName.toLowerCase().includes(e)||t.lastName.toLowerCase().includes(e)||t.email.toLowerCase().includes(e)||t.phoneNumber.includes(e))},[t,c]),h=e=>{try{return(0,v.Z)(new Date(e),"MMM dd, yyyy")}catch(t){return e}},p=e=>{try{let t=new Date(e),s=new Date,a=s.getFullYear()-t.getFullYear(),r=s.getMonth()-t.getMonth();return(r<0||0===r&&s.getDate()<t.getDate())&&a--,a}catch(e){return"N/A"}};return s?(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:(0,a.jsx)(P,{size:"lg",className:"h-32"})}):(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[(0,a.jsx)(d.Z,{className:"w-6 h-6 text-blue-600"}),"Patients"]}),(0,a.jsxs)("p",{className:"text-gray-600 mt-1",children:[u.length," of ",t.length," patients"]})]}),x&&(0,a.jsxs)(g,{onClick:o,className:"flex items-center gap-2",children:[(0,a.jsx)(k.Z,{className:"w-4 h-4"}),"Add Patient"]})]}),(0,a.jsxs)("div",{className:"mt-4 relative",children:[(0,a.jsx)(C.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,a.jsx)(f,{type:"text",placeholder:"Search patients by name, email, or phone...",value:c,onChange:e=>m(e.target.value),className:"pl-10"})]})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:0===u.length?(0,a.jsxs)("div",{className:"p-8 text-center",children:[(0,a.jsx)(d.Z,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:c?"No patients found":"No patients yet"}),(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:c?"Try adjusting your search terms":"Get started by adding your first patient"}),x&&!c&&(0,a.jsx)(g,{onClick:o,children:"Add First Patient"})]}):(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Age / DOB"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),x&&(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center text-white font-semibold",children:[e.firstName[0],e.lastName[0]]}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.firstName," ",e.lastName]}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["ID: ",e.id]})]})]})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,a.jsx)("div",{className:"text-sm text-gray-900",children:e.email}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.phoneNumber})]}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-900",children:[p(e.dob)," years old"]}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:h(e.dob)})]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:h(e.createdAt)}),x&&(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex items-center justify-end space-x-2",children:[(0,a.jsx)(g,{variant:"ghost",size:"sm",onClick:()=>i(e),className:"text-blue-600 hover:text-blue-700",children:(0,a.jsx)(S.Z,{className:"w-4 h-4"})}),(0,a.jsx)(g,{variant:"ghost",size:"sm",onClick:()=>l(e),className:"text-red-600 hover:text-red-700",children:(0,a.jsx)(E.Z,{className:"w-4 h-4"})})]})})]},e.id))})]})})]})}function L(e){var t,s,r,n,d;let{patient:o,onSubmit:c,onCancel:m,isLoading:u=!1}=e,{register:h,handleSubmit:p,formState:{errors:y}}=(0,i.cI)({resolver:(0,l.F)(x),defaultValues:o?{firstName:o.firstName,lastName:o.lastName,email:o.email,phoneNumber:o.phoneNumber,dob:o.dob}:void 0}),j=async e=>{await c(e)};return(0,a.jsxs)("form",{onSubmit:p(j),className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsx)(f,{label:"First Name",placeholder:"Enter first name",...h("firstName"),error:null===(t=y.firstName)||void 0===t?void 0:t.message}),(0,a.jsx)(f,{label:"Last Name",placeholder:"Enter last name",...h("lastName"),error:null===(s=y.lastName)||void 0===s?void 0:s.message})]}),(0,a.jsx)(f,{label:"Email",type:"email",placeholder:"Enter email address",...h("email"),error:null===(r=y.email)||void 0===r?void 0:r.message}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsx)(f,{label:"Phone Number",type:"tel",placeholder:"Enter phone number",...h("phoneNumber"),error:null===(n=y.phoneNumber)||void 0===n?void 0:n.message}),(0,a.jsx)(f,{label:"Date of Birth",type:"date",...h("dob"),error:null===(d=y.dob)||void 0===d?void 0:d.message})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4 pt-4 border-t border-gray-200",children:[(0,a.jsx)(g,{type:"button",variant:"secondary",onClick:m,disabled:u,children:"Cancel"}),(0,a.jsx)(g,{type:"submit",isLoading:u,children:o?"Update Patient":"Create Patient"})]})]})}var A=s(3639),Z=s(2489);function D(e){let{isOpen:t,onClose:s,title:n,children:i,size:l="md"}=e;return((0,r.useEffect)(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),(0,r.useEffect)(()=>{let e=e=>{"Escape"===e.key&&s()};return t&&document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[t,s]),t)?(0,a.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,a.jsxs)("div",{className:"flex min-h-screen items-center justify-center p-4",children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:s}),(0,a.jsxs)("div",{className:"\n            relative bg-white rounded-xl shadow-xl w-full ".concat({sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"}[l],"\n            transform transition-all duration-300 scale-100 opacity-100\n          "),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:n}),(0,a.jsx)(g,{variant:"ghost",size:"sm",onClick:s,className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,a.jsx)(Z.Z,{className:"w-4 h-4"})})]}),(0,a.jsx)("div",{className:"p-6",children:i})]})]})}):null}function I(e){let{patient:t,onConfirm:s,onCancel:r,isLoading:n}=e;return t?(0,a.jsx)(D,{isOpen:!!t,onClose:r,title:"Delete Patient",size:"sm",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:(0,a.jsx)(A.Z,{className:"h-6 w-6 text-red-600"})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Are you sure?"}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 mb-6",children:["You are about to delete ",(0,a.jsxs)("strong",{children:[t.firstName," ",t.lastName]}),". This action cannot be undone."]}),(0,a.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,a.jsx)(g,{variant:"secondary",onClick:r,disabled:n,children:"Cancel"}),(0,a.jsx)(g,{variant:"danger",onClick:s,isLoading:n,children:"Delete Patient"})]})]})}):null}function T(){let{patients:e,isLoading:t,createPatient:s,updatePatient:n,deletePatient:i}=function(){let[e,t]=(0,r.useState)([]),[s,a]=(0,r.useState)(!0),[n,i]=(0,r.useState)(null),l=()=>{let e=localStorage.getItem("authToken");return{"Content-Type":"application/json",Authorization:e?"Bearer ".concat(e):""}},d=(0,r.useCallback)(async()=>{try{a(!0),i(null);let e=await fetch("/api/patients",{headers:l()}),s=await e.json();if(!e.ok||!s.success)throw Error(s.error||"Failed to fetch patients");t(s.data||[])}catch(e){i(e instanceof Error?e.message:"Unknown error")}finally{a(!1)}},[]),o=async e=>{let s=await fetch("/api/patients",{method:"POST",headers:l(),body:JSON.stringify(e)}),a=await s.json();if(!s.ok||!a.success)throw Error(a.error||"Failed to create patient");if(a.data)return t(e=>[...e,a.data]),a.data;throw Error("No patient data returned")},c=async(e,s)=>{let a=await fetch("/api/patients/".concat(e),{method:"PUT",headers:l(),body:JSON.stringify(s)}),r=await a.json();if(!a.ok||!r.success)throw Error(r.error||"Failed to update patient");if(r.data)return t(t=>t.map(t=>t.id===e?r.data:t)),r.data;throw Error("No patient data returned")},m=async e=>{let s=await fetch("/api/patients/".concat(e),{method:"DELETE",headers:l()}),a=await s.json();if(!s.ok||!a.success)throw Error(a.error||"Failed to delete patient");t(t=>t.filter(t=>t.id!==e))};return(0,r.useEffect)(()=>{d()},[d]),{patients:e,isLoading:s,error:n,refetch:d,createPatient:o,updatePatient:c,deletePatient:m}}(),[l,d]=(0,r.useState)(!1),[o,c]=(0,r.useState)(null),[m,x]=(0,r.useState)(null),[u,h]=(0,r.useState)(!1),g=async e=>{try{h(!0),o?await n(o.id,e):await s(e),d(!1),c(null)}catch(e){console.error("Error submitting patient:",e)}finally{h(!1)}},f=async()=>{if(m)try{h(!0),await i(m.id),x(null)}catch(e){console.error("Error deleting patient:",e)}finally{h(!1)}},p=()=>{d(!1),c(null)};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(w,{}),(0,a.jsx)("main",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:(0,a.jsx)(z,{patients:e,isLoading:t,onEdit:e=>{c(e),d(!0)},onDelete:e=>{x(e)},onAdd:()=>{c(null),d(!0)}})}),(0,a.jsx)(D,{isOpen:l,onClose:p,title:o?"Edit Patient":"Add New Patient",size:"lg",children:(0,a.jsx)(L,{patient:null!=o?o:void 0,onSubmit:g,onCancel:p,isLoading:u})}),(0,a.jsx)(I,{patient:m,onConfirm:f,onCancel:()=>{x(null)},isLoading:u})]})}function F(){let{isAuthenticated:e,isLoading:t}=(0,n.a)();return t?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsx)(P,{size:"lg"})}):e?(0,a.jsx)(T,{}):(0,a.jsx)(p,{})}},4362:function(e,t,s){"use strict";s.d(t,{AuthProvider:function(){return i},a:function(){return l}});var a=s(7437),r=s(2265);let n=(0,r.createContext)(void 0);function i(e){let{children:t}=e,[s,i]=(0,r.useState)(null),[l,d]=(0,r.useState)(!0);(0,r.useEffect)(()=>{o()},[]);let o=async()=>{try{let e=localStorage.getItem("authToken");if(!e){d(!1);return}let t=await fetch("/api/auth/me",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();e.success&&e.data?i(e.data):localStorage.removeItem("authToken")}else localStorage.removeItem("authToken")}catch(e){console.error("Auth check failed:",e),localStorage.removeItem("authToken")}finally{d(!1)}},c={user:s,isLoading:l,login:async e=>{d(!0);try{let t=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),s=await t.json();if(!t.ok||!s.success)throw Error(s.error||"Login failed");s.data&&(localStorage.setItem("authToken",s.data.token),i(s.data.user))}catch(e){throw e}finally{d(!1)}},logout:()=>{localStorage.removeItem("authToken"),i(null)},isAuthenticated:!!s,isAdmin:(null==s?void 0:s.role)==="admin"};return(0,a.jsx)(n.Provider,{value:c,children:t})}function l(){let e=(0,r.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},function(e){e.O(0,[742,971,117,744],function(){return e(e.s=5764)}),_N_E=e.O()}]);